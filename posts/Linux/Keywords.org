#+TITLE: C语言的关键字
#+DATE: 2023-10-17 22:53:57
#+DISPLAY: t
#+STARTUP: indent
#+OPTIONS: toc:10
#+AUTHOR: inmove
#+KEYWORDS: static
#+CATEGORIES: C

* 关键字
** static
- 用于局部变量时，它会使变量的生命周期贯穿整个程序执行过程，而不仅仅是函数执行过程。但其作用域仍然限制在声明它的函数内。
静态局部变量在程序启动时初始化，并且只初始化一次。它们通常用于保留函数调用之间的信息。
#+begin_src C :results output
  #include <stdio.h>

  int fn(int a) {
      static int b = 10;
      printf("value of b: %d\n", b); // 10, 11, 12
      b++;
      return a + b;
  }

  int main() {
      int x = 10;
      printf("%d\n", fn(x));   // 20
      printf("%d\n", fn(x));   // 21
      printf("%d\n", fn(x));   // 22
      return 0;
  }
#+end_src

- 当 static 用于全局变量时，它会限制变量的作用域在声明它的文件内，而不是整个程序。
- static 用于函数时，它会限制函数的作用域在声明它的文件内
